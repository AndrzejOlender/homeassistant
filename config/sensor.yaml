# Zigbee Network Map
- platform: mqtt
  name: Zigbee2mqtt Networkmap
  # if you change base_topic of Zigbee2mqtt, change state_topic accordingly
  state_topic: zigbee2mqtt/bridge/networkmap/raw
  value_template: >-
    {{ now().strftime('%Y-%m-%d %H:%M:%S') }}
  # again, if you change base_topic of Zigbee2mqtt, change json_attributes_topic accordingly
  json_attributes_topic: zigbee2mqtt/bridge/networkmap/raw  

# Dishwasher
- platform: integration
  source: sensor.dishwasher_power
  name: "Dishwasher Energy"
  unit_prefix: k
  round: 2  

- platform: template
  sensors:
    dishwasher:
      friendly_name: "Dishwasher"
      value_template: >-
        {% if states('sensor.dishwasher_power') != ('unavailable' or 'unknown') %}
          {% if states('sensor.dishwasher_power') | int > 3 %}
            washing
          {% else %}
            disable
          {% endif %}
        {% else %}
          {{ states('sensor.dishwasher') }}
        {% endif %}

# Washermachine
- platform: integration
  source: sensor.washermachine_power
  name: "Washermachine Energy"
  unit_prefix: k
  round: 2  

- platform: template
  sensors:
    washermachine:
      friendly_name: "Washermachine"
      value_template: >-
        {% if states('sensor.washermachine_power') != ('unavailable' or 'unknown') %}
          {% if states('sensor.washermachine_power') | int > 3 %}
            washing
          {% else %}
            disable
          {% endif %}
        {% else %}
          {{ states('sensor.washermachine') }}
        {% endif %}     

# Thermo
- platform: template
  sensors:
    thermostat_livingroom_temperature:
      friendly_name: "Living Room Temperature"
      unit_of_measurement: '°C'
      value_template: "{{ states.climate.thermolivingroom_climate.attributes.current_temperature }}"

    thermostat_childroom_temperature:
      friendly_name: "Child Room Temperature"
      unit_of_measurement: '°C'
      value_template: "{{ states.climate.thermochildroom_climate.attributes.current_temperature }}"

    thermostat_kitchen_temperature:
      friendly_name: "Kitchen Room Temperature"
      unit_of_measurement: '°C'
      value_template: "{{ states.climate.thermokitchen_climate.attributes.current_temperature }}" 

# Weather 
- platform: template
  sensors:
    wind:
      friendly_name: "Wind"
      unit_of_measurement: ""
      value_template: "{{ state_attr('weather.home', 'wind_speed') }}"

# Coinbase 
- platform: template
  sensors:
    eth:
      friendly_name: "ETH"
      unit_of_measurement: ""
      value_template: "{{ state_attr('sensor.coinbase_eth_wallet', 'Balance in native currency') }}"

- platform: template
  sensors:
    btc:
      friendly_name: "BTC"
      unit_of_measurement: ""
      value_template: "{{ state_attr('sensor.coinbase_btc_wallet', 'Balance in native currency') }}"

- platform: pgnig_gas_sensor
  username: !secret pgnig_user
  password: !secret pgnig_password